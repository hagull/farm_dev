{% extends "palm/base.html" %}

{% block content %}
{% load palm_filters %}

<div class="control-nav">
  <div class="control-inner" style="position:relative; ">
    <form action="" method="get">
        {% if user.allhousecctv_set.all.exists %}
        <button class="btn btn-primary" name = "house" value = "all"><span>실외</span></button>
        {% endif %}
        <button class="btn btn-primary" name = "house" value = "all"><span>실내</span></button>
        {% for gcg in user.gcg_set.all %}
        <button class="btn btn-primary" name = "house" value = "{{ gcg.id }}"><span>{{forloop.counter}} 동</span></button>
        {% endfor %}
    </form>
  </div>
</div>

<div class="control-content">
  {% for cctv in gcg_cctv %}
    <div class = "cctv">{{cctv.gcg}} {{ cctv.get_cctv_type_display }} CCTV {{ forloop.counter }}</div>
  {% endfor %}
  <hr>

  {% if all_house_cctv %}

  {% else %}
    {% filter snode snode_type='t' as temp_snode %}
    {% filter snode snode_type='h' as humd_snode %}
    <h2>Snode Value</h2>
    <div class="">
      <table class="sensor-table">
        <thead>
          <th>온도</th>
          <th>습도</th>
          <th>CO2</th>
          <th>광량</th>
          <th>배지온도</th>
          <th>배지습도</th>
          <th>배지EC</th>
        </thead>
        <tbody>
          <!--
          {{temp_snode.0}}
          {{humd_snode.0}}-->
          <td>37</td>
          <td>66%</td>
          <td>33%</td>
          <td>28</td>
          <td>37도</td>
          <td>66%</td>
          <td>0.1</td>
        </tbody>

      </table>
    </div>


    <h2>Anode Control</h2>
      {% filter anode anode_type='oc' as oc_anode %}
      {% filter anode anode_type='wm' as wm_anode %}

    <h3>Open and Close Anode</h3>
    {% for oc in oc_anode %}
      <div class = "btn btn-primary">{{oc}}</div>
      <a href="{% url "data:anode_request" gcg.id oc.id %}" class = "btn btn-primary">Anode Control</a>
    {% endfor %}

    <h3>Wartering Motor</h3>
    {% for wm in wm_anode %}
      <div class = "btn btn-primary">{{wm}}</div>
      <a href="{% url "data:anode_request" gcg.id wm.id %}" class = "btn btn-primary">Anode Control</a>
    {% endfor %}
  {% endif %}
</div>

{% endblock %}
